import json
from openai import OpenAI
from app.services.request_log import RequestLogService
import os

chatgpt_api_key = os.environ.get("CHATGPT_API_KEY") or ""


def call_chatgpt_create_caption(images=[], data={}, post_id=0):

    prompt = """ì—…ë¡œë“œëœ ì´ë¯¸ì§€ë¥¼ ì°¸ê³ í•˜ì—¬ ì œí’ˆì„ í™ë³´í•˜ëŠ” ìˆí¼(Shorts, TikTok) ìŠ¤íƒ€ì¼ì˜ ì˜ìƒ ì½˜í…ì¸ ë¥¼ ì œì‘í•˜ë„ë¡ ì§€ì›í•´ ë“œë¦½ë‹ˆë‹¤.

[ì—­í• ]
ë‹¹ì‹ ì€ 20~30ëŒ€ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ìœ í–‰í•˜ëŠ” ì–¸ì–´ë¥¼ í™œìš©í•˜ëŠ” ì• í”Œì˜ ë°”ì´ëŸ´ ë§ˆì¼€í„°ì…ë‹ˆë‹¤. ìƒí’ˆì„ í™ë³´í•˜ëŠ” ì˜ìƒì„ ë§Œë“œëŠ” ì‘ì—…ì„ ì§„í–‰í•  ì˜ˆì •ì…ë‹ˆë‹¤. FOMO, ì‚¬íšŒì  ì¦ê°€, ê³µê°ê³¼ ê°ì„± ìê·¹, ì²« 3ì´ˆì˜ ë²•ì¹™, ìì´ê°€ë¥´ë‹‰íš¨ê³¼ ë“± ì ì ˆí•œ ì‹¬ë¦¬í•™ ê¸°ë²•ì„ ìƒí™©ì— ë§ê²Œ ì‚¬ìš©í•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•˜ì„¸ìš”. ì–´ë–¤ ê¸°ë²•ì´ ì ì ˆí•œì§€ ê³ ë ¤í•œ í›„, ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì •í™•í•œ ì‹¤í–‰ì„ ê³„íší•©ë‹ˆë‹¤.

[ìš”êµ¬ ì‚¬í•­]
- **ì „ì²´ì ì¸ í˜•ì‹**: 
  - FOMO, ì‚¬íšŒì  ì¦ê°€ ë“±ì˜ ì‹¬ë¦¬í•™ ê¸°ë²•ì„ ìƒí™©ì— ë§ê²Œ í™œìš©í•˜ì—¬ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì œì‘í•©ë‹ˆë‹¤. 
  - ê° ìš”ì†Œê°€ ì–´ë–»ê²Œ ì‹¬ë¦¬ì  íš¨ê³¼ë¥¼ ì£¼ëŠ”ì§€ ì´í•´í•˜ê³ , ì´ë¥¼ ì–´ë–»ê²Œ í™œìš©í•  ê²ƒì¸ì§€ ì„¤ëª…í•œ í›„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.
  - ìœ ë¨¸ëŸ¬ìŠ¤í•˜ê³  ë„ë°œì ì¸ ë¬¸ì²´ ì‚¬ìš© ë° ì»¤ë®¤ë‹ˆí‹° íŠ¹ìœ ì˜ ë°ˆ(meme)ê³¼ ìœ í–‰ì–´ í™œìš©
  - ëŒ“ê¸€ ë°˜ì‘ì„ ìœ ë„í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•©ë‹ˆë‹¤.

[ì…ë ¥ ì •ë³´]
- ì œí’ˆëª…: {name}
- ê°€ê²©: {price}
- ì œí’ˆ ì„¤ëª…: {description}
- íŒë§¤ì²˜: {store_name}
- ì œí’ˆ ë§í¬: {base_url}
- ì œí’ˆ ì†Œê°œ: {text}

- ìˆœìˆ˜ í…ìŠ¤íŠ¸ í˜•ì‹ìœ¼ë¡œ ë°˜í™˜
- íŠ¹ìˆ˜ ë¬¸ì ë° Markdown ì‚¬ìš© ê¸ˆì§€
- captionì—ì„œ ì´ëª¨í‹°ì½˜ ì‚¬ìš© ê¸ˆì§€

[ìƒì„± ì¡°ê±´]
- **hooking**: 
  - ì´ 4ê°œì˜ ë¬¸ì¥ì„ ê°ê° 20ì ì´ë‚´ì˜ í…ìŠ¤íŠ¸ë¡œ ì‘ì„± 

- **caption**: 
  - ì•½ 450ê¸€ìë¡œ captionì„ ìƒì„±í•  ê²ƒ, ì´ëª¨í‹°ì½˜ ì‚¬ìš© ì ˆëŒ€ ê¸ˆì§€. 
  - ì´ëª¨í‹°ì½˜ ì‚¬ìš© ê¸ˆì§€
  - ìŠ¤í† ë¦¬í…”ë§ í˜•ì‹ìœ¼ë¡œ ìƒí’ˆì— ëŒ€í•´ì„œ ì†Œê°œí•˜ëŠ” caption ì‘ì„±
  - ë°˜ë“œì‹œ "[ì˜ˆì‹œ ì¶œë ¥]ì˜ ##script"ì„ ì°¸ê³ í•´ì„œ ì‘ì„±í•  ê²ƒ.
  - í•œ ë¬¸ì¥ì„ ëê¹Œì§€ ì˜¨ì „í•˜ê²Œ ì‘ì„±í•  ê²ƒ.
  - ìœ ë¨¸ ì½”ë“œì™€ ë°ˆ(meme) ë°˜ì˜
  - ì»¤ë®¤ë‹ˆí‹° íŠ¹ìœ ì˜ ìì—°ìŠ¤ëŸ¬ìš´ í‘œí˜„ ì‚¬ìš©

- **title**: 
  - {name} ë¬´ì¡°ê±´ í¬í•¨ 
  - titleì€ ìœ íŠœë¸Œ ì œëª©ìœ¼ë¡œ ë“¤ì–´ê°ˆ ë‚´ìš©
  - ìœ íŠœë¸Œì—ì„œ í´ë¦­ì„ ìœ ë„í•  ìˆ˜ ìˆëŠ” í¥ë¯¸ë¡œìš´ í‘œí˜„ í¬í•¨

- **description**: 
  - {name} ë¬´ì¡°ê±´ í¬í•¨ 
  - ì¤„ë°”ê¿ˆ í›„ "êµ¬ë§¤ë§í¬ğŸ‘‰: {base_url}" ì´ ë¬¸ì¥ ë¬´ì¡°ê±´ í‘œì‹œ 
  - í•œì¤„ë¡œ ì‘ì„±
  - ë¬¸ì¥ì„ ì •í™•í•˜ê²Œ ëë‚´ì§€ ë§ê³ , ë§ ëì„ íë¦´ ê²ƒ 

- **hashtag**: 
  - {name} ë¬´ì¡°ê±´ í¬í•¨ 
  - ì œí’ˆêµ°ê³¼ ê´€ë ¨ëœ í•´ì‹œíƒœê·¸ ì„ ì •, ìº¡ì…˜ê³¼ ë¶„ë¦¬ëœ ê°œë³„ ëª©ë¡ìœ¼ë¡œ ì œê³µ
  - ì œí’ˆ ë° íƒ€ê²Ÿ ê³ ê°ì¸µì— ë§ëŠ” ì¸ê¸° í•´ì‹œíƒœê·¸ ì„ ì •
  - ê°œë³„ í•´ì‹œíƒœê·¸ë¡œ ì œê³µí•˜ë©°, ìº¡ì…˜ê³¼ ë¶„ë¦¬í•˜ì—¬ ì‘ì„±í•©ë‹ˆë‹¤.

[ì˜ˆì‹œ ì¶œë ¥]
## hookaing:
1. ì˜ìƒ ì‹œì‘ ì‹œ 
'ì´ ê¸°ëŠ¥ ëª°ëë‹¤ë©´ ì†í•´!'
'ì´ê±° ì—†ìœ¼ë©´ ë¶ˆí¸í•¨ í­ë°œ!'
'ì•Œê³  ë³´ë©´ ì¸ìƒí…œ! ëê¹Œì§€ ë³´ì„¸ìš”.'
'ì´ ì œí’ˆ, ì™œ ë‚œë¦¬ ë‚œ ê±¸ê¹Œ?'
'ì´ê±° ë³´ë©´ ë¬´ì¡°ê±´ ê°–ê³  ì‹¶ì–´ì§‘ë‹ˆë‹¤!'
'ì²˜ìŒ ë³´ë©´ ê¶ê¸ˆí•œë°, ì“°ë©´ ëª» ëŠì–´ìš”.'
'ì§€ê¸ˆ ìŠ¤í¬ë¡¤í•˜ë©´ í›„íšŒí•  ìˆ˜ë„ ìˆì–´ìš”!'
'ì‚¬ëŒë“¤ì´ ì—´ê´‘í•˜ëŠ” ì´ìœ ? ë§ˆì§€ë§‰ì— ê³µê°œ!'
'í•œ ë²ˆ ë³´ë©´ ê³„ì† ì°¾ê²Œ ë©ë‹ˆë‹¤.'
'ì™œ ì´ê±¸ ì´ì œì•¼ ì•Œì•˜ì„ê¹Œ?'
'ì´ê±° í•˜ë‚˜ë©´ í•´ê²° ë!'
'ìœ íŠœë²„ë“¤ì´ ê·¹ì°¬í•œ ë°”ë¡œ ê·¸ ì œí’ˆ!'

2. ì²« ë²ˆì§¸ ì´ë¯¸ì§€ ì‹œì‘ ì‹œ (2ì´ˆê°„ í‘œì‹œ)
'ğŸ”¥ ìˆ˜ë§ì€ ì‚¬ìš©ìê°€ ì„ íƒí•œ ì¸ê¸°í…œ! ì´ìœ ê°€ ë­˜ê¹Œìš”?'
'ë¦¬ë·° í‰ì  â˜…â˜…â˜…â˜…â˜…, ì‹¤ì‚¬ìš©ìê°€ ì „í•˜ëŠ” ì°¬ì‚¬!'
'ì‚¬ìš©ìë“¤ì´ ê·¹ì°¬í•˜ëŠ” í˜ì‹ , ì§ì ‘ ê²½í—˜í•´ë³´ì„¸ìš”.'
'í•œ ë²ˆ ì“°ë©´ ë©ˆì¶œ ìˆ˜ ì—†ëŠ” ë†€ë¼ìš´ ê¸°ëŠ¥!'
'ì‚¬ìš©ìë“¤ì´ ì¬êµ¬ë§¤í•˜ëŠ” ê·¸ ì œí’ˆ!'
'ìœ ëª… ìœ íŠœë²„ë“¤ì´ ì¶”ì²œí•˜ëŠ” ì•„ì´í…œ!'
'ì „ ì„¸ê³„ ì‚¬ìš©ìë“¤ì´ ì„ íƒí•œ ë² ìŠ¤íŠ¸ì…€ëŸ¬, ê·¸ ì´ìœ ëŠ”?'
'ì˜¨ë¼ì¸ ì¸ê¸° ìˆœìœ„ 1ìœ„! ì§€ê¸ˆ í™•ì¸í•˜ì„¸ìš”.'
'ì´ ê°€ê²©ì— ì´ ì„±ëŠ¥, ë¯¿ê¸° ì–´ë ¤ìš¸ ì •ë„ì…ë‹ˆë‹¤!'

3. ì„¸ ë²ˆì§¸ ì´ë¯¸ì§€ ì‹œì‘ ì‹œ (2ì´ˆê°„ í‘œì‹œ)
'ì´ê±° ì—†ì—ˆìœ¼ë©´ ì•„ì§ë„ ë¶ˆí¸í–ˆì„ ê±¸?'
'ì´ ì œí’ˆ í•˜ë‚˜ë¡œ ê³ ë¯¼ ë! ì‚¬ìš©ë²•ë„ ì´ˆê°„ë‹¨'
'ì¼ìƒì´ í¸í•´ì§€ëŠ” ë§ˆë²•, í•œ ë²ˆ ì¨ë³´ì„¸ìš”!'
'ì´ì œ ë” ì´ìƒ ë¶ˆí¸í•¨ NO! ì™„ë²½í•œ í•´ê²°ì±…'
'ë§¤ì¼ ì“°ëŠ” ë¬¼ê±´, ë” í¸í•˜ê²Œ ë°”ê¿”ë³´ì„¸ìš”!'
'ëˆ ì•„ë¼ëŠ” ë²•? ì´ ì œí’ˆì´ ë‹µì…ë‹ˆë‹¤!'
'í•œ ë²ˆ ì¨ë³´ë©´ ë‹¤ë¥¸ ê±´ ëª» ì”ë‹ˆë‹¤.'
'ì´ê±° ì—†ìœ¼ë©´ ì†í•´ ë³´ëŠ” ê±° ë§ì£ ?'
'ê³ ê°ë“¤ì´ ì „í•˜ëŠ”, â€˜ì§„ì‘ ì‚´ ê±¸ ê·¸ë¬ì–´ìš”!â€™'
'ì´ë ‡ê²Œ ì‰¬ìš¸ ì¤„ ëª°ëìŠµë‹ˆë‹¤!'
'ì´ì œ ê³ ë¯¼í•  í•„ìš” ì—†ì–´ìš”! í•œ ë°©ì— í•´ê²°'
'ë” ì´ìƒ ë¶ˆí¸í•˜ê²Œ ì‚´ í•„ìš” ì—†ìŠµë‹ˆë‹¤!'
'ë‹¹ì‹ ë„ ê²ªì–´ë³¸ ê·¸ ë¶ˆí¸í•¨, ì´ì œ í•´ê²°!'
'í›„íšŒ ì—†ëŠ” ì„ íƒ, ì§€ê¸ˆ ë°”ë¡œ ê²½í—˜í•˜ì„¸ìš”!'

4. ë§ˆì§€ë§‰ í›„í‚¹ ì˜ìƒ (ì˜ìƒ ëê¹Œì§€ í‘œì‹œ)
'ğŸ”¥ ì§€ê¸ˆ í´ë¦­í•˜ë©´ ì¶”ê°€ í• ì¸!'
'ë†“ì¹˜ë©´ í›„íšŒ! ì§€ê¸ˆ í™•ì¸í•˜ì„¸ìš”.'
'ì¬ê³ ê°€ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ì–´ìš”! ì„œë‘˜ëŸ¬ì£¼ì„¸ìš”.'
'í• ì¸ì€ ì˜ˆê³  ì—†ì´ ì¢…ë£Œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŠ¦ê¸° ì „ì— í™•ì¸í•˜ì„¸ìš”.'
'ğŸš¨ í•œì • ìˆ˜ëŸ‰! ì§€ê¸ˆ êµ¬ë§¤í•˜ì„¸ìš”.'
'ì˜¤ëŠ˜ë§Œ íŠ¹ê°€! ì§€ê¸ˆ ë°”ë¡œ í™•ì¸í•˜ì„¸ìš”.'
'êµ¬ë§¤í•˜ëŸ¬ ê°€ê¸° ì „ì—, í• ì¸ í˜œíƒì„ í™•ì¸í•˜ì„¸ìš”!'
'ì§€ê¸ˆ í´ë¦­í•˜ë©´ ë¬´ë£Œ ë°°ì†¡ í˜œíƒ!'
'ì´ ì œí’ˆ, í’ˆì ˆë˜ê¸° ì „ì— ì¡ìœ¼ì„¸ìš”!'
'ì´ì œ ì‚´ê¹Œ ë§ê¹Œ ê³ ë¯¼í•  ì‹œê°„ ì—†ìŠµë‹ˆë‹¤!'
'1ì´ˆë¼ë„ ëŠ¦ìœ¼ë©´ í’ˆì ˆ! ì„œë‘˜ëŸ¬ì£¼ì„¸ìš”!'

## caption:
'ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ ì• í”Œì˜ ìµœì‹  ë…¸íŠ¸ë¶ ë§¥ë¶ í”„ë¡œ 16 M4ë¥¼ ì†Œê°œí•´ë“œë¦´ê²Œìš”.
16ì¸ì¹˜ ë‚˜ë…¸ í…ìŠ¤ì²˜ ë””ìŠ¤í”Œë ˆì´ë¥¼ íƒ‘ì¬í•´ ëˆˆë¶€ì‹¬ì„ ìµœì†Œí™”í•˜ê³ , ì–´ë–¤ í™˜ê²½ì—ì„œë„ ì„ ëª…í•œ í™”ë©´ì„ ì œê³µí•©ë‹ˆë‹¤. ë•ë¶„ì— ì‹¤ë‚´ëŠ” ë¬¼ë¡  ì¹´í˜ë‚˜ ì•¼ì™¸ì—ì„œë„ í¸ì•ˆí•˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆì–´ìš”.
ìµœì‹  M4 ì‹œë¦¬ì¦ˆ ì¹©ì´ íƒ‘ì¬ë˜ì–´ ì´ì „ ëª¨ë¸ë³´ë‹¤ ìµœëŒ€ 3.5ë°° í–¥ìƒëœ ì„±ëŠ¥ì„ ì œê³µí•˜ë©°, ì˜ìƒ í¸ì§‘, ê·¸ë˜í”½ ë””ìì¸ ë“± ê³ ì‚¬ì–‘ ì‘ì—…ë„ ë¶€ë“œëŸ½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°•ë ¥í•œ ì„±ëŠ¥ ë•ë¶„ì— ë©€í‹°íƒœìŠ¤í‚¹ë„ ë”ìš± íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ìš”.
ë˜í•œ, ìƒˆë¡œìš´ ì¬ë”ë³¼íŠ¸ 5 í¬íŠ¸ë¥¼ í†µí•´ ìµœëŒ€ 120Gb/sì˜ ì´ˆê³ ì† ì „ì†¡ ì†ë„ë¥¼ ì§€ì›í•´ ëŒ€ìš©ëŸ‰ íŒŒì¼ë„ ë¹ ë¥´ê²Œ ì „ì†¡í•  ìˆ˜ ìˆì–´ ì‘ì—… íš¨ìœ¨ì´ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤.
macOS Sequoia 15.1ì„ í†µí•´ AI ê¸°ë°˜ ë„êµ¬ì™€ í–¥ìƒëœ ì‹œë¦¬, ì•„ì´í° ë¯¸ëŸ¬ë§, ê°œì¸í™”ëœ ê³µê°„ ìŒí–¥ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ê²½í—˜í•  ìˆ˜ ìˆìœ¼ë©°, ë”ìš± ì§ê´€ì ì´ê³  í¸ë¦¬í•œ ì‚¬ìš© í™˜ê²½ì„ ì œê³µí•©ë‹ˆë‹¤.
ê°•ë ¥í•œ ì„±ëŠ¥ê³¼ í˜ì‹ ì ì¸ ê¸°ìˆ ì„ ê°–ì¶˜ ë§¥ë¶ í”„ë¡œ 16 M4ë¡œ ë”ìš± ë¹ ë¥´ê³  íš¨ìœ¨ì ì¸ ì‘ì—…ì„ ê²½í—˜í•´ë³´ì„¸ìš”.'
'ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ ì§‘ì—ì„œ ì¹´í˜ ê°ì„±ì„ ëŠë‚„ ìˆ˜ ìˆëŠ” ë„¤ìŠ¤ì¹´í˜ ëŒì²´êµ¬ìŠ¤í†  ì§€ë‹ˆì˜¤ Së¥¼ ì†Œê°œí•´ë“œë¦´ê²Œìš”.
ê°„í¸í•œ í„°ì¹˜ ì¡°ì‘ìœ¼ë¡œ ì›í•˜ëŠ” ì»¤í”¼ë¥¼ ë¹ ë¥´ê²Œ ì¶”ì¶œí•  ìˆ˜ ìˆì–´ ë°”ìœ ì•„ì¹¨ì—ë„ ë¶€ë‹´ ì—†ì´ ì¦ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœëŒ€ 15ë°”ì˜ ê³ ì•• ì¶”ì¶œ ì‹œìŠ¤í…œ ë•ë¶„ì— ê¹Šê³  í’ë¶€í•œ ì•„ë¡œë§ˆì™€ ë¶€ë“œëŸ¬ìš´ í¬ë ˆë§ˆë¥¼ ì™„ì„±í•´ ë”ìš± ë§›ìˆëŠ” ì»¤í”¼ë¥¼ ê²½í—˜í•  ìˆ˜ ìˆì–´ìš”.
ì§„í•œ ì»¤í”¼ê°€ í•„ìš”í•  ë• ì—ìŠ¤í”„ë ˆì†Œ ë¶€ìŠ¤íŠ¸ ëª¨ë“œë¥¼ í™œìš©í•´ ë”ìš± ê¹Šê³  ê°•ë ¬í•œ í’ë¯¸ë¥¼ ëŠë‚„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 4ë‹¨ê³„ ì˜¨ë„ ì¡°ì ˆ ê¸°ëŠ¥ì´ íƒ‘ì¬ë˜ì–´ ìˆì–´ ì—¬ë¦„ì—ëŠ” ì•„ì´ìŠ¤ ì»¤í”¼, ê²¨ìš¸ì—ëŠ” ë”°ëœ»í•œ ë¼ë–¼ê¹Œì§€ ê¸°í˜¸ì— ë§ì¶° ì‚¬ê³„ì ˆ ë‚´ë‚´ ì™„ë²½í•œ ì»¤í”¼ íƒ€ì„ì„ ì¦ê¸¸ ìˆ˜ ìˆì–´ìš”.
ë˜í•œ, 1ë¶„ ë™ì•ˆ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ìë™ìœ¼ë¡œ ì „ì›ì´ êº¼ì§€ëŠ” ì—ì½” ëª¨ë“œë¡œ ì—ë„ˆì§€ë¥¼ ì ˆì•½í•  ìˆ˜ ìˆì–´ ë”ìš± ì‹¤ìš©ì ì…ë‹ˆë‹¤.
ì–¸ì œë“  ì§‘ì—ì„œ ê°„í¸í•˜ê²Œ ì™„ë²½í•œ ì»¤í”¼ í•œ ì”ì„ ì¦ê¸¸ ìˆ˜ ìˆëŠ” ë„¤ìŠ¤ì¹´í˜ ëŒì²´êµ¬ìŠ¤í†  ì§€ë‹ˆì˜¤ Së¡œ ë”ìš± í’ì„±í•œ ì»¤í”¼ ë¼ì´í”„ë¥¼ ê²½í—˜í•´ë³´ì„¸ìš”!'

## title:
'ì´ í›„ë“œí‹° ì—†ìœ¼ë©´ ë´„ ì½”ë”” ì™„ì„± ëª» í•œë‹¤ê³ ?!ğŸ”¥ ({name})'
'ìš”ì¦˜ ìŠ¤íŠ¸ë¦¿ íŒ¨ì…˜ í•µì‹¬í…œ! ì´ê±° í•˜ë‚˜ë©´ ë! ({name})'
'ì§„ì§œ ìŠ¤íƒ€ì¼ ì‹ ê²½ ì“°ëŠ” ì‚¬ëŒë“¤ì€ ë‹¤ ì´ê±° ì…ìŒ ({name})'
'í›„ë“œí‹° í•˜ë‚˜ë¡œ ë¶„ìœ„ê¸° ì´ë ‡ê²Œ ë‹¬ë¼ì§„ë‹¤ê³ ? ğŸ˜³ ({name})'
'ì†”ì§íˆ ì´ê±° í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ì½”ë”” ëë‚œë‹¤! ({name})'
'í›„ë“œí‹° ì…ëŠ” ì‚¬ëŒ í•„ìˆ˜ ì‹œì²­! í›„ë“œí‹° ê³ ë¥´ëŠ” ë²• ({name})'
'ë‚¨ì¹œë£©, ì—¬ì¹œë£© ì´ê±° í•˜ë‚˜ë©´ ê²Œì„ ëğŸ”¥ ({name})'
'ì˜¬ë´„ íŠ¸ë Œë“œ í›„ë“œí‹°! ìŠ¤íƒ€ì¼ë§ ê¿€íŒ ëŒ€ë°©ì¶œ ({name})'
'í™í•œ ì‚¬ëŒë“¤ì€ ë‹¤ ì…ëŠ”ë‹¤ëŠ” ê·¸ í›„ë“œí‹° ({name})'
'ìŠ¤íŠ¸ë¦¿ íŒ¨ì…˜ í•„ìˆ˜í…œ! í›„ë“œí‹° ì¶”ì²œ Best 5 ({name})'

## description:
ğŸ”¥ ê°•í•œ í˜¸ê¸°ì‹¬ ìœ ë°œí˜•
'ì´ê±° ì—†ìœ¼ë©´ ì˜¬ë´„ ì½”ë”” ëë‚¬ë‹¤ê³  ë´ì•¼ì§€...ğŸ”¥ > {base_url}\n\n\n{name}'
'íŒ¨ì…˜ ì¢€ ì‹ ê²½ ì“°ëŠ” ì• ë“¤ì€ ë‹¤ ìƒ€ë‹¤ëŠ”ë°? ğŸ¤” > {base_url}\n\n\n{name}'
'ìš”ì¦˜ ì´ê±° ì—†ì´ ìŠ¤íƒ€ì¼ë§ ëª»í•œë‹¤ë˜ë°...ğŸ˜ > {base_url}\n\n\n{name}'
'ê·¸ëƒ¥ í¸í•´ì„œ ì…ì—ˆëŠ”ë° ë¶„ìœ„ê¸° ë¯¸ì³¤ë‹¤ê³  í•¨;; > {base_url}\n\n\n{name}'
'ì´ê±° í’ˆì ˆëœë‹¤ëŠ” ì–˜ê¸° ë“¤ì—ˆëŠ”ë° ì‚¬ì‹¤ì„?ğŸ˜¨ > {base_url}\n\n\n{name}'

ğŸ”¥ ìœ í–‰ & íŠ¸ë Œë“œ ë°˜ì˜í˜•
'ì´ê±° ìš”ì¦˜ í™í•œ ì• ë“¤ì€ ë‹¤ ì…ëŠ”ë‹¤ë©°? ğŸ˜ > {base_url}\n\n\n{name}'
'ìŠ¤íŠ¸ë¦¿ë£© ì…ëŠ” ì• ë“¤ ì´ê±° ë‹¤ ìƒ€ë”ë¼;; > {base_url}\n\n\n{name}'
'íŒ¨ì…˜ í”¼í”Œ ì‚¬ì´ì—ì„œ ìš”ì¦˜ ì œì¼ í•«í•œ í›„ë“œí‹° > {base_url}\n\n\n{name}'
'ì—°ì˜ˆì¸ë“¤ì´ ìš”ì¦˜ ì´ê±° ì…ê³  ë‚˜ì˜¨ë‹¤ê³  í•¨!! > {base_url}\n\n\n{name}'
'íŠ¸ë Œë“œ ì¢€ ì‹ ê²½ ì“°ëŠ” ì‚¬ëŒë“¤ì€ ë‹¤ ìƒ€ë‹¤ëŠ”ë°? > {base_url}\n\n\n{name}'

ğŸ”¥ ê³µê° ìœ ë°œí˜• (ì¹œêµ¬/ì—°ì¸/ì¼ìƒ ì—°ê³„)
'ì´ê±° ì…ê³  ê°”ëŠ”ë° ì¹œêµ¬ë“¤ì´ ë¸Œëœë“œ ì–´ë””ëƒê³  ë¬¼ì–´ë´„ > {base_url}\n\n\n{name}'
'í›„ë“œí‹° í•˜ë‚˜ ìƒ€ì„ ë¿ì¸ë° ìŠ¤íƒ€ì¼ ì™œ ì´ë ‡ê²Œ ë‹¬ë¼ì§? > {base_url}\n\n\n{name}'
'ë°ì´íŠ¸ë£© ê³ ë¯¼ ëë‚¬ë‹¤, ê·¸ëƒ¥ ì´ê±° ì…ìœ¼ë©´ ë¨ > {base_url}\n\n\n{name}'
'ì´ê±° ì…ê³  ë‚˜ê°”ë”ë‹ˆ ì—¬ì¹œì´ ê·€ì—½ëŒ€...ğŸ«£ > {base_url}\n\n\n{name}'
'ì´ê±° ì…ê³  ì‚¬ì§„ ì°ìœ¼ë©´ ì¸ìƒìƒ· ë³´ì¥ë¨ğŸ“¸ > {base_url}\n\n\n{name}'

ğŸ”¥ ìœ ë¨¸ & ìê·¹í˜•
'ì´ê±° ì‚¬ë©´ íŒ¨ì…˜ ì¸ì‹¸ ë˜ëŠ” ê±° ë§ìŒ? > {base_url}\n\n\n{name}'
'ì†”ì§íˆ ì´ê±° ì•ˆ ì‚¬ëŠ” ì‚¬ëŒë“¤ ì´í•´ ì•ˆ ê° > {base_url}\n\n\n{name}'
'ì´ê±° í’ˆì ˆë˜ë©´ ëˆˆë¬¼ ë‚œë‹¤ ì§„ì§œ... > {base_url}\n\n\n{name}'
'ì§„ì§œ ìŠ¤íƒ€ì¼ì— ê´€ì‹¬ ìˆëŠ” ì‚¬ëŒë“¤ì€ ì´ê±° ë‹¤ ìƒ€ë‹¤ëŠ”ë°? > {base_url}\n\n\n{name}'
'ì´ê±° ì‚¬ê³  í›„ë“œí‹° ìœ ëª©ë¯¼ íƒˆì¶œí–ˆë‹¤ > {base_url}\n\n\n{name}'

## hashtag:
'#{name}#íŒ¨ì…˜ìŠ¤íƒ€ê·¸ë¨ #ìš´ë™ë³µì¶”ì²œ #ootd #ì¼ìƒë£© #ìŠ¤í¬í‹°ë£© #ì—¬ìì˜· #ìŠ¤íƒ€ì¼ë§ #ì‡¼í•‘'
'#{name}#ì¸ìƒí…œ #ì‚´ë¦¼ê¿€í…œ #ë‚´ëˆë‚´ì‚° #ì§‘ê¾¸ë¯¸ê¸° #í¸ë¦¬ë¯¸ì—„ #í•„ìˆ˜í…œ #ì‚´ë¦¼í…œ #ìë™ì²­ì†Œ'

[Notes]
- ì˜ˆì‹œ ì¶œë ¥ì„ ì°¸ê³ í•  ê²ƒ.
- 20ëŒ€, 30ëŒ€ ì»¤ë®¤ë‹ˆí‹° ë¬¸í™”ë¥¼ ê¹Šì´ ì´í•´í•˜ê³  ì´ë¥¼ ë°˜ì˜í•©ë‹ˆë‹¤.
- íŠ¸ë Œë””í•œ ìš”ì†Œë“¤ì„ ì •í™•íˆ íŒŒì•…í•˜ê³  ì ìš©í•˜ëŠ” ë° ì¤‘ì ì„ ë‘¡ë‹ˆë‹¤.
"""
    prompt = replace_prompt_with_data(prompt, data)

    prompt = prompt.replace("CAPTION_COUNT", str(len(images)))

    content = [{"type": "text", "text": prompt}]
    for image in images:
        content.append({"type": "image_url", "image_url": {"url": image}})

    response_schema = {
        "name": "response_schema",
        "strict": True,
        "schema": {
            "type": "object",
            "properties": {
                "response": {
                    "type": "object",
                    "properties": {
                        "hooking": {
                            "type": "array",
                            "description": "hooking message",
                            "items": {"type": "string"},
                        },
                        "caption": {
                            "type": "string",
                            "description": "caption for making video.",
                        },
                        "title": {
                            "type": "string",
                            "description": "Title of the response.",
                        },
                        "description": {
                            "type": "string",
                            "description": "Description text displayed separately from the image on platforms like YouTube, Instagram, and TikTok.",
                        },
                        "hashtag": {
                            "type": "string",
                            "description": "Hashtag associated with the response.",
                        },
                    },
                    "required": [
                        "hooking",
                        "caption",
                        "title",
                        "description",
                        "hashtag",
                    ],
                    "additionalProperties": False,
                }
            },
            "required": ["response"],
            "additionalProperties": False,
        },
    }

    return call_chatgpt(content, response_schema, post_id)


def call_chatgpt_create_blog(images=[], data={}, post_id=0):
    prompt = """ì—…ë¡œë“œëœ ì´ë¯¸ì§€ë“¤ì„ ì°¸ê³ í•˜ì—¬, ì œí’ˆì˜ ë‹¤ìŒ ì„¸ë¶€ ì •ë³´ë¥¼ ë°˜ì˜í•œ **ë¸”ë¡œê·¸ ê²Œì‹œê¸€**ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.
ì œí’ˆ ê´€ë ¨ ì •ë³´:
- ì œí’ˆëª…: {name}
- ê°€ê²©: {price}
- ì œí’ˆ ì„¤ëª…: {description}
- íŒë§¤ì²˜: {store_name}
- ì œí’ˆ ë§í¬: {base_url}
- ì œí’ˆ ì†Œê°œ: {text}

ì¡°ê±´:
- ê²Œì‹œê¸€ì€ ì•½ 1200ì ì •ë„ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
- ì œí’ˆì— ëŒ€í•œ ìì„¸í•œ ì„¤ëª…, ì¥ì , ì‚¬ìš© ë°©ë²• ë“±ì„ í¬í•¨í•˜ì—¬ ë…ìê°€ ê´€ì‹¬ì„ ê°€ì§ˆ ìˆ˜ ìˆë„ë¡ ì¹œê·¼í•˜ê³  ì„¤ë“ë ¥ ìˆê²Œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
- ë¸”ë¡œê·¸ ê²Œì‹œê¸€ì€ **HTML í˜•ì‹**ìœ¼ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”.
- ê²Œì‹œê¸€ ìƒë‹¨ì— ì‚¬ìš©ìì˜ ê´€ì‹¬ì„ ëŒ ìˆ˜ ìˆëŠ” **ë§¤ë ¥ì ì¸ ì œëª©**ì„ ì‘ì„±í•´ ì£¼ì„¸ìš”.
- ì œí’ˆì˜ ì´ë¯¸ì§€ëŠ” ì—…ë¡œë“œëœ ì´ë¯¸ì§€ì—ì„œ ì„ íƒí•˜ì—¬ ì ì ˆí•œ ìœ„ì¹˜ì— ì‚½ì…í•´ ì£¼ì„¸ìš”.
- ê° ì´ë¯¸ì§€ì˜ `src`ëŠ” `IMAGE_URL_index` í˜•íƒœë¡œ ì‘ì„±ë˜ì–´ì•¼ í•˜ë©°, `index`ëŠ” `0`ë¶€í„° COUNT_IMAGE ê¹Œì§€ì˜ ìˆ«ìë¡œ ëŒ€ì²´ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- ê²Œì‹œê¸€ ë‚´ìš©ê³¼ í•¨ê»˜, ë³¸ë¬¸ ë‚´ìš©ì„ ìš”ì•½í•œ **ìš”ì•½ë¬¸**ë„ ìƒì„±í•´ ì£¼ì„¸ìš”.
- **ìš”ì•½ë¬¸ì€ 300~350ì ì´ë‚´ë¡œ ì‘ì„±í•´ ì£¼ì„¸ìš”. (ì°¸ê³ : ê¸€ì ìˆ˜ ì œí•œì€ ìš”ì•½ë¬¸ì—ë§Œ ì ìš©ë˜ë©°, ë³¸ë¬¸ì€ ì•½ 1200ì ê°€ì´ë“œë¼ì¸ì— ë”°ë¦…ë‹ˆë‹¤.)**
- ìš”ì•½ì˜ ë‚´ìš©ì€ ë°˜ë“œì‹œ í•œêµ­ì–´ë¡œ ì‘ì„±ë˜ì–´ì•¼ í•˜ë©°, ê²°ê³¼ëŠ” ìˆœìˆ˜í•œ ë¬¸ìì—´ë¡œë§Œ ë°˜í™˜ë˜ì–´ì•¼ í•©ë‹ˆë‹¤
"""
    prompt = prompt.replace("COUNT_IMAGE", str(len(images)))

    prompt = replace_prompt_with_data(prompt, data)

    content = [{"type": "text", "text": prompt}]
    for image in images:
        content.append({"type": "image_url", "image_url": {"url": image}})

    response_schema = {
        "name": "response_schema",
        "schema": {
            "type": "object",
            "properties": {
                "response": {
                    "type": "object",
                    "properties": {
                        "title": {
                            "type": "string",
                            "description": "The title of the response.",
                        },
                        "summarize": {
                            "type": "string",
                            "description": "A summary or brief overview of the content.",
                        },
                        "content": {
                            "type": "string",
                            "description": "The main content of the response.",
                        },
                    },
                    "required": ["title", "summarize", "content"],
                    "additionalProperties": False,
                }
            },
            "required": ["response"],
            "additionalProperties": False,
        },
        "strict": True,
    }

    return call_chatgpt(content, response_schema, post_id)


def call_chatgpt_create_social(images=[], data={}, post_id=0):
    prompt = """[ì—­í• ]
ë‹¹ì‹ ì€ ë°”ì´ëŸ´ ë§ˆì¼€íŒ… ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì…ë ¥í•œ ë§í¬ì˜ ì œí’ˆì„ ë¶„ì„í•˜ê³ , êµ¬ë§¤ íƒ€ê²Ÿì˜ ê´€ì‹¬ì„ ëŒ ìˆ˜ ìˆëŠ” SNS ì½˜í…ì¸ ë¥¼ ì œì‘í•˜ì„¸ìš”.
10ëŒ€, 20ëŒ€, 30ëŒ€ê°€ ì£¼ìš” íƒ€ê²Ÿì´ë¼ë©´ MZì„¸ëŒ€ ë§íˆ¬ì™€ ìœ í–‰ì–´ë¥¼ í¬í•¨í•´ ì¬ë¯¸ìˆê³  ê³µê°ë˜ëŠ” ë¬¸êµ¬ë¥¼ ì‘ì„±í•˜ì„¸ìš”.

[ì…ë ¥ ì •ë³´]
ì œí’ˆëª…: {name}
ê°€ê²©: {price}
ì œí’ˆ ì„¤ëª…: {description}
íŒë§¤ì²˜: {store_name}
ì œí’ˆ ë§í¬: {base_url}
ì´ë¯¸ì§€ ê°œìˆ˜: {image_count}
ì œí’ˆ ì†Œê°œ: {text}

[ìƒì„± ì¡°ê±´]
- **caption**: 
  - ì²« ë²ˆì§¸ ì´ë¯¸ì§€: ì œí’ˆì„ ì§ì ‘ ì–¸ê¸‰í•˜ì§€ ì•Šê³ , í˜¸ê¸°ì‹¬ì„ ìœ ë°œí•˜ëŠ” í•œ ì¤„ì§œë¦¬ ë°”ì´ëŸ´ ë¬¸êµ¬ ì‘ì„± (ì˜ˆ: "ì´ê±° í•œ ë²ˆ ì¨ë³´ë©´ ì ˆëŒ€ ëª» ëŒì•„ê°‘ë‹ˆë‹¤")
  - ë‘ ë²ˆì§¸~{image_count}ë²ˆì§¸ ì´ë¯¸ì§€: êµ¬ë§¤ ìš•êµ¬ë¥¼ ìê·¹í•˜ëŠ” ê³µê°í˜• ë©˜íŠ¸ì™€ í•¨ê»˜ ì œí’ˆì˜ í•µì‹¬ í¬ì¸íŠ¸ 3ê°€ì§€ ì‘ì„±.
  - í…ìŠ¤íŠ¸ëŠ” 2ì¤„ ê¸¸ì´ë¡œ ë§ì¶°ì„œ ì‘ì„±. (ì˜ˆ: 'ì„¸ìƒ í¸í•œ OOO! ë°”ìœ ì•„ì¹¨ì—ë„ ì´ˆìŠ¤í”¼ë“œ')

- **description**:
  - í•œ ì¤„ë¡œ ì‘ì„±
  - ë¬¸ì¥ì„ ì •í™•í•˜ê²Œ ëë‚´ì§€ ë§ê³ , ë§ ëì„ íë¦´ ê²ƒ

- **hashtag**: 
  - ì œí’ˆê³¼ ê´€ë ¨ë˜ë©´ì„œë„ ì‚¬ëŒë“¤ì´ ê°€ì¥ ê´€ì‹¬ ê°€ì§ˆ 10ê°œ í‚¤ì›Œë“œë¥¼ ì¶”ì¶œí•´ í¬í•¨ (ì˜ˆ: #OOTD #í•µê¿€í…œ #ì´ê²Œë°”ë¡œìµœì‹ í…œ #í¸ë¦¬ë¯¸ì—„)

[ì˜ˆì‹œ ì¶œë ¥]
## caption:
[ì²« ë²ˆì§¸ ì´ë¯¸ì§€ - ë°”ì´ëŸ´ ë¬¸êµ¬(ì•„ë˜ ì˜ˆì‹œê°™ì€ í˜•íƒœë¡œ í•˜ë‚˜ë§Œ ì¶œë ¥)]:
í•œë²ˆ ì¨ë³´ë©´ ë‹¤ì‹œëŠ” ëª»ëŒì•„ ê°„ë‹¤ëŠ” ë§˜ì¹´í˜ ì „ì„¤ì˜ ì œí’ˆ
ì´ê±° ì—†ìœ¼ë©´ ë‹¤ë¦¬ ê¸¸ì´ -5cm íš¨ê³¼ì„
ë‚˜ëŠ” ëƒ„ìƒˆ ë•Œë¬¸ì— ì• ì¸ì´ë‘ í—¤ì–´ì§„ ì ì´ ìˆë‹¤ğŸš€ğŸ“±âœ¨
ìœ í–‰ ì•ˆ íƒ€ëŠ” ëŠì¢‹ ìš´ë™í™”
ëŠì¢‹ë‚¨ë“¤ì´ í•˜ë‚˜ì¯¤ ê°€ì§€ê³  ìˆëŠ” ì•„ì´í…œ
í•€í„° ê°ì„± ë‚¼ ìˆ˜ ìˆëŠ” ë‚¨ì ë ˆë”ìì¼“ ì½”ë””
ë´„ì— ë­ ì…ì§€ ì½”ë””ë¶ ëª¨ìŒ
ë‚¨ë“¤ì€ ì ˆëŒ€ ëª¨ë¥´ëŠ” SPA ë¸Œëœë“œ ê¿€í…œ
ì»¤í”Œì€ 2ì›”ì— ì´ê±° ë¬´ì¡°ê±´ í•´ì•¼ë¨;
ì˜·ì¥ ì† ê¸°ë³¸í…œì„ êº¼ë‚¼ ì‹œê°„
ëŠì¢‹ë…€ í•„ìˆ˜ ê°ì„± ê°€ë“ ì¼€ì´ìŠ¤
íŠ¹ë³„í•œ ì»¤í”Œ ë°°ê²½í™”ë©´ ë§Œë“¤ê¸°
ë¸”ëŸ°ë“œìŠ¤í†¤ ì—†ëŠ” ì‚¬ëŒ ë°”ë³´
ë”°ë¼ ì…ê³  ì‹¶ì–´ì§€ëŠ” ì˜¬ë¦¬ë¸Œê·¸ë¦° ì»¬ëŸ¬ ì¡°í•©
í•€í„°ë ˆìŠ¤íŠ¸ ì¸ê°„ì´ ë˜ëŠ” ì•„ì´í…œ
ì˜¬ ë´„ì— ì´ë ‡ê²Œ ì…ìœ¼ë©´ ì˜· ì˜ ì…ëŠ”ë‹¤ ë“¤ì–´ìš”
ì¹œêµ¬ì•¼ ì¤€ë¹„ëì§€? ì´ë ‡ê²Œ ì°ì–´ì¤˜!
ì—¬ì‚¬ì¹œì´ ì—¬ìì— ëŒ€í•´ ë§í•´ì¤€ ê±´ë° ì´ê±° ë§ë§ì´ëƒ
1ì›”ì—ëŠ” ë¬´ì–¼ ìƒ€ë‹ˆ?
ìš”ì¦˜ ìœ í–‰ì´ë¼ëŠ” í—¨ë¦¬ë„¥ êµ¬ì…í—¨ë¦¬?
ë“œë””ì–´ ì–‡ì€ ì˜·ë“¤ì„ êº¼ë‚¼ ë•Œê°€ ì™”ë‹¤. ë¯¸ë¦¬ ì¤€ë¹„í•˜ëŠ” ë‚¨ì ë´„ ë°ì¼ë¦¬ë£© ì½”ë””
ë‚¨ë“¤ì´ë‘ ì•ˆ ê²¹ì¹˜ëŠ” ì˜¬ê²€ 8ë§Œì›ëŒ€ ë‹¥í„°ë§ˆí‹´?
ì§€ê°‘ ì‚¬ì •ì´ ì•ˆ ì¢‹ë‹¤ë©´ ì—¬ê¸°ì„œ ì‡¼í•‘í•˜ì„¸ìš”
ê¹”ë”ì“° í›„ë”” ë°”ë§‰
ì´ê±´ ë¹„ë°€ì¸ë°.. íŒ¨ì…˜ ì°¸ê³ í•˜ëŠ” ë¹„ë°€ê³„ì •
ì°¸ê³ í•˜ê¸° ì¢‹ì€ ëŠì¢‹ ì™¸êµ­ í˜•ë‹˜ë“¤
ìê¸°ì•¼ ì´ë ‡ê²Œ ì…ì–´ì¤˜
ì—¬ìì¹œêµ¬ ì‹¬ì¥ í­í–‰í•˜ëŠ” ëŒ•ëŒ•ì´íŒ

[ë‘ ë²ˆì§¸ ì´ë¯¸ì§€ - ë°”ì´ëŸ´ ì„¤ëª…(ì•„ë˜ ì˜ˆì‹œê°™ì€ í˜•íƒœë¡œ í•˜ë‚˜ë§Œ ì¶œë ¥)]:
ì¹œêµ¬ê°€ ì´ê±° ì“°ê³  ë‹¤ë‹ˆê¸¸ë˜ ë­”ì§€ ë¬¼ì–´ë´¤ë”ë‹ˆ, ì¨ë³´ë‹ˆê¹Œ ã„¹ã…‡ ì¸ì •. ìš”ì¦˜ ëŒ€ì„¸ì„ ã…‡ã…‡
ë¨¼ì§€, ì• ì™„ë™ë¬¼ í„¸, ê³¼ì ë¶€ìŠ¤ëŸ¬ê¸°ê¹Œì§€ í•œë²ˆì— ì‹¹
ì´ê±° í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ì²­ì†Œ ìŠ¤íŠ¸ë ˆìŠ¤ ì‚¬ë¼ì§ã…‹ã…‹
ì—„ë§ˆí•œí…Œ ì„ ë¬¼í–ˆë”ë‹ˆ ì¸ìƒí…œì´ë¼ê³  í•¨
ê°•ì•„ì§€ í„¸ ë•Œë¬¸ì— ë¯¸ì³ê°€ë˜ ë‚´ ì¹œêµ¬, ì´ê±° ì‚¬ê³  í‰ì˜¨í•´ì§
ì¹¨ëŒ€ ë°‘ ë¨¼ì§€ê¹Œì§€ ì‹¹! ì´ê±° ì—†ì´ ì–´ë–»ê²Œ ì‚´ì•˜ë‚˜ ì‹¶ìŒ

[ì„¸ ë²ˆì§¸ ì´ë¯¸ì§€ - ë°”ì´ëŸ´ ì„¤ëª…(ì•„ë˜ ì˜ˆì‹œê°™ì€ í˜•íƒœë¡œ í•˜ë‚˜ë§Œ ì¶œë ¥)]:
ì²˜ìŒì—ëŠ” ê·¸ëƒ¥ í˜¸ê¸°ì‹¬ìœ¼ë¡œ ì‹œì‘í–ˆëŠ”ë°, í•œ ë²ˆ ì¨ë³´ê³  ë‚˜ë‹ˆ ì¸ìƒí…œ í™•ì •
ì¥ì• ë¬¼ í”¼í•˜ëŠ” ê¸°ìˆ ê¹Œì§€ ì¢‹ì•„ì ¸ì„œ ë¬¸í„±, ì¹´í˜íŠ¸ë„ ë¬¸ì œì—†ë‹¤ê³ ;
ì†”ì§íˆ ì²˜ìŒì—” ê¸°ëŒ€ ì•ˆ í–ˆëŠ”ë°, ì¨ë³´ë‹ˆê¹Œ ì¸ì •í•  ìˆ˜ë°–ì— ì—†ìŒ
ì´ê±° ì“°ê³  ë‚˜ì„œ ì²­ì†Œê¸° ë‹¤ì‹œ ì•ˆ ì”€â€¦ ì§„ì‹¬ ê°œí¸í•¨
ì¹œêµ¬í•œí…Œ ì¶”ì²œë°›ê³  ìƒ€ëŠ”ë°, ì´ì œ ë‚˜ë„ ì¶”ì²œí•˜ê³  ë‹¤ë‹˜
ì²˜ìŒì—” ë¹„ì‹¸ë‹¤ê³  ìƒê°í–ˆëŠ”ë°, ê°€ì„±ë¹„ ë”°ì§€ë©´ ì´ê²Œ ìµœê³ 
3ì¼ë§Œ ì¨ë³´ë©´ ì™œ ë‹¤ë“¤ ê·¹ì°¬í•˜ëŠ”ì§€ ì•Œê²Œ ë¨

[ë„¤ ë²ˆì§¸ ì´ë¯¸ì§€ - ë°”ì´ëŸ´ ì„¤ëª…(ì•„ë˜ ì˜ˆì‹œê°™ì€ í˜•íƒœë¡œ í•˜ë‚˜ë§Œ ì¶œë ¥)]:
DCì¸ì‚¬ì´ë“œ ê°¤ëŸ¬ë¦¬ì—ì„œë„ ë²Œì¨ ì…ì†Œë¬¸ë‚œ ê¿€í…œ, ì‚¬ë†“ê³  í›„íšŒ ì—†ëŠ” ì„ íƒ!
ê±¸ë ˆ ë¹¨ê³  ë¬¼í†µ ì±„ìš°ëŠ”ê±° ê¹Œì§€ ì•Œì•„ì„œ í•œë‹¤ë‹ˆ ëˆì´ ì¢‹ë‹¤ã…‹ã…‹
ê¸°ìˆ ì˜ ë°œì „ì´ë€ ì´ëŸ° ê²ƒâ€¦ ì²­ì†Œ ëë‚˜ê³  ìë™ ì¶©ì „ê¹Œì§€
í‡´ê·¼í•˜ê³  ì˜¤ë©´ ë°”ë‹¥ì´ ê¹¨ë—í•´ì ¸ ìˆìŒ, ì´ê²Œ í˜ëª…
ì• ë“¤ ë•Œë¬¸ì— ì§‘ ì²­ì†Œí•˜ê¸° í˜ë“¤ì—ˆëŠ”ë°, ì´ì œ ê±±ì • ì—†ìŒ
ì£¼ë§ë§ˆë‹¤ ì²­ì†Œê¸° ë“¤ê³  ë‹¤ë‹ˆë˜ ë‚´ê°€ í•œì‹¬í•´ì§ã…‹ã…‹
ì•±ìœ¼ë¡œ ì»¨íŠ¸ë¡¤ ë˜ëŠ”ê±° ë³´ê³  ë¯¸ë˜ë¥¼ ëŠê¼ˆë‹¤

[ë‹¤ì„¯ ë²ˆì§¸ ì´ë¯¸ì§€ - ë°”ì´ëŸ´ ì„¤ëª…(ì•„ë˜ ì˜ˆì‹œê°™ì€ í˜•íƒœë¡œ í•˜ë‚˜ë§Œ ì¶œë ¥)]:
ë‚˜ë§Œ ì•Œê³  ì‹¶ì—ˆë˜ ë¹„ë°€í…œ, ì´ì   ëª¨ë‘ê°€ ì•Œì•„ì•¼ í•  ê¿€ì¡°í•©â€¦
ì•±ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ ê´€ë¦¬ë˜ëŠ”ê²ƒë„ ëŒ€ë°•ì„
ì´ê±° ì—†ìœ¼ë©´ ë‚´ ì²­ì†Œ ë£¨í‹´ ë§í•¨
ì²­ì†Œí•˜ëŠ”ë° ì‹œê°„ ì•„ë‚„ ìˆ˜ ìˆëŠ” ìµœê³ ì˜ ë°©ë²•
ì´ê±° ì‚¬ë©´ ë°”ë‹¥ì´ ë°˜ì§ê±°ë¦¬ëŠ” ê¸°ì ì„ ê²½í—˜í•˜ê²Œ ë¨
ì£¼ë°© ë°”ë‹¥ ë¬¼ë•Œê¹Œì§€ ì‹¹ í•´ê²°ë¨. ì§„ì§œ ì‹ ì„¸ê³„
ë°˜ë ¤ë™ë¬¼ í‚¤ìš°ëŠ” ì§‘ì´ë©´ ì´ê±° ë¬´ì¡°ê±´ í•„ìˆ˜í…œ
í•œë²ˆ ì¨ë³´ë©´ ì™œ ë‹¤ë“¤ ê·¹ì°¬í•˜ëŠ”ì§€ ì•Œê²Œ ë¨

## description:
ğŸ”¥ ê°•í•œ í˜¸ê¸°ì‹¬ ìœ ë°œí˜•
ì´ê±° ì—†ìœ¼ë©´ ì˜¬ë´„ ì½”ë”” ëë‚¬ë‹¤ê³  ë´ì•¼ì§€...ğŸ”¥ > {base_url}
íŒ¨ì…˜ ì¢€ ì‹ ê²½ ì“°ëŠ” ì• ë“¤ì€ ë‹¤ ìƒ€ë‹¤ëŠ”ë°? ğŸ¤” > {base_url}
ìš”ì¦˜ ì´ê±° ì—†ì´ ìŠ¤íƒ€ì¼ë§ ëª»í•œë‹¤ë˜ë°...ğŸ˜ > {base_url}
ê·¸ëƒ¥ í¸í•´ì„œ ì…ì—ˆëŠ”ë° ë¶„ìœ„ê¸° ë¯¸ì³¤ë‹¤ê³  í•¨;; > {base_url}
ì´ê±° í’ˆì ˆëœë‹¤ëŠ” ì–˜ê¸° ë“¤ì—ˆëŠ”ë° ì‚¬ì‹¤ì„?ğŸ˜¨ > {base_url}

ğŸ”¥ ìœ í–‰ & íŠ¸ë Œë“œ ë°˜ì˜í˜•
ì´ê±° ìš”ì¦˜ í™í•œ ì• ë“¤ì€ ë‹¤ ì…ëŠ”ë‹¤ë©°? ğŸ˜ > {base_url}
ìŠ¤íŠ¸ë¦¿ë£© ì…ëŠ” ì• ë“¤ ì´ê±° ë‹¤ ìƒ€ë”ë¼;; > {base_url}
íŒ¨ì…˜ í”¼í”Œ ì‚¬ì´ì—ì„œ ìš”ì¦˜ ì œì¼ í•«í•œ í›„ë“œí‹° > {base_url}
ì—°ì˜ˆì¸ë“¤ì´ ìš”ì¦˜ ì´ê±° ì…ê³  ë‚˜ì˜¨ë‹¤ê³  í•¨!! > {base_url}
íŠ¸ë Œë“œ ì¢€ ì‹ ê²½ ì“°ëŠ” ì‚¬ëŒë“¤ì€ ë‹¤ ìƒ€ë‹¤ëŠ”ë°? > {base_url}

ğŸ”¥ ê³µê° ìœ ë°œí˜• (ì¹œêµ¬/ì—°ì¸/ì¼ìƒ ì—°ê³„)
ì´ê±° ì…ê³  ê°”ëŠ”ë° ì¹œêµ¬ë“¤ì´ ë¸Œëœë“œ ì–´ë””ëƒê³  ë¬¼ì–´ë´„ > {base_url}
í›„ë“œí‹° í•˜ë‚˜ ìƒ€ì„ ë¿ì¸ë° ìŠ¤íƒ€ì¼ ì™œ ì´ë ‡ê²Œ ë‹¬ë¼ì§? > {base_url}
ë°ì´íŠ¸ë£© ê³ ë¯¼ ëë‚¬ë‹¤, ê·¸ëƒ¥ ì´ê±° ì…ìœ¼ë©´ ë¨ > {base_url}
ì´ê±° ì…ê³  ë‚˜ê°”ë”ë‹ˆ ì—¬ì¹œì´ ê·€ì—½ëŒ€...ğŸ«£ > {base_url}
ì´ê±° ì…ê³  ì‚¬ì§„ ì°ìœ¼ë©´ ì¸ìƒìƒ· ë³´ì¥ë¨ğŸ“¸ > {base_url}

ğŸ”¥ ê°ì„± & ë¯¸ë‹ˆë©€í•œ ê°ê°í˜•
ë¯¸ë‹ˆë©€í•œë° ê°ì„± ì œëŒ€ë¡œ ì‚´ë¦¬ëŠ” í›„ë“œí‹° > {base_url}
ê·¸ëƒ¥ ê°€ë³ê²Œ ì…ì—ˆëŠ”ë° ë¶„ìœ„ê¸° ã…†ã……ã…Œã…Š > {base_url}
ë§¤ì¼ ì…ì–´ë„ ì§ˆë¦¬ì§€ ì•ŠëŠ” ê·¸ëŸ° ì˜· > {base_url}
ë°ì¼ë¦¬ë£© ê³ ë¯¼í•  í•„ìš” ì—†ìŒ, ì´ê±° í•˜ë‚˜ë©´ ë > {base_url}
ì´ê±° ì…ê³  ê±°ìš¸ ë³´ë©´ ê¸°ë¶„ ì¢‹ì•„ì§„ë‹¤ë‹ˆê¹Œ? > {base_url}

ğŸ”¥ ë¦¬ë·° & ì¶”ì²œ ëŠë‚Œí˜•
ì§„ì§œ í›„íšŒ ì—†ì´ ì‚° ì˜· TOP 3 ì•ˆì— ë“¦ > {base_url}
ì…ì–´ë³¸ ì‚¬ëŒë“¤ ë°˜ì‘ ë¯¸ì³¤ë‹¤, ì§„ì§œì„ > {base_url}
ì´ê±° ì…ì–´ë³¸ ì‚¬ëŒë“¤ì€ ì™œ ë‹¤ë¥¸ í›„ë“œ ëª» ì…ëŠ”ì§€ ì•Œê² ìŒ > {base_url}
ì—­ì‹œ í›„ê¸° ì¢‹ì€ ì œí’ˆì€ ì´ìœ ê°€ ìˆë„¤ > {base_url}
ë‹¤ë¥¸ ê±° ê³ ë¯¼í•  í•„ìš” ì—†ìŒ, ê·¸ëƒ¥ ì´ê±° ì‚¬ë©´ ë¨ > {base_url}

ğŸ”¥ ìœ ë¨¸ & ìê·¹í˜•
ì´ê±° ì‚¬ë©´ íŒ¨ì…˜ ì¸ì‹¸ ë˜ëŠ” ê±° ë§ìŒ? > {base_url}
ì†”ì§íˆ ì´ê±° ì•ˆ ì‚¬ëŠ” ì‚¬ëŒë“¤ ì´í•´ ì•ˆ ê° > {base_url}
ì´ê±° í’ˆì ˆë˜ë©´ ëˆˆë¬¼ ë‚œë‹¤ ì§„ì§œ... > {base_url}
ì§„ì§œ ìŠ¤íƒ€ì¼ì— ê´€ì‹¬ ìˆëŠ” ì‚¬ëŒë“¤ì€ ì´ê±° ë‹¤ ìƒ€ë‹¤ëŠ”ë°? > {base_url}
ì´ê±° ì‚¬ê³  í›„ë“œí‹° ìœ ëª©ë¯¼ íƒˆì¶œí–ˆë‹¤ > {base_url}

ğŸ”¥ ê³„ì ˆ & íŠ¸ë Œë“œ í™œìš©í˜•
ì˜¬ë´„ í•„ìˆ˜í…œì€ ì´ê±°ë¼ê³  í•˜ë˜ë°? > {base_url}
ê°€ì„ë£© ì´ê±° í•˜ë‚˜ë©´ ëë‚˜ëŠ” ê±° ì•„ë‹˜? > {base_url}
ìš”ì¦˜ ê°™ì€ ë‚ ì”¨ì— ë”± ë§ëŠ” ì•„ì´í…œ!! > {base_url}
ê³„ì ˆ ë°”ë€Œë‹ˆê¹Œ ë˜ í’ˆì ˆë  ë“¯;; ì„œë‘ë¥´ì…ˆ > {base_url}
ì˜¬í•´ëŠ” ì§„ì§œ ìŠ¤íƒ€ì¼ ì¢€ ì±™ê¸°ê³  ì‹¶ë‹¤ë©´ ì´ê±°ë¶€í„° > {base_url}

ğŸ”¥ ê°€ê²© & í•œì •íŒ ê°•ì¡°í˜•
ì´ ê°€ê²©ì— ì´ í€„ë¦¬í‹° ë§ìŒ? ê°€ì„±ë¹„ ë¯¸ì³¤ë‹¤ > {base_url}
ì§€ê¸ˆ ì„¸ì¼ ì¤‘ì´ë¼ë‹ˆê¹Œ ë°”ë¡œ ìƒ€ë‹¤ > {base_url}
í•œì • ìˆ˜ëŸ‰ì´ë¼ëŠ”ë°... ëŠ¦ìœ¼ë©´ ëª» ì‚°ë‹¤ > {base_url}
ì´ê±° í’ˆì ˆ ì „ì— ë¹¨ë¦¬ ì£¼ë¬¸í•´ì•¼ í•  ë“¯;; > {base_url}
ì´ ê°€ê²©ì´ë©´ ë‹¹ì¥ ì‚¬ì•¼ í•˜ëŠ” ê±° ì•„ë‹˜? > {base_url}

â–  Hashtags:
#íŒ¨ì…˜ìŠ¤íƒ€ê·¸ë¨ #ìš´ë™ë³µì¶”ì²œ #ootd #ì¼ìƒë£© #ìŠ¤í¬í‹°ë£© #ì—¬ìì˜· #ìŠ¤íƒ€ì¼ë§ #ì‡¼í•‘
#ì¸ìƒí…œ #ì‚´ë¦¼ê¿€í…œ #ë‚´ëˆë‚´ì‚° #ì§‘ê¾¸ë¯¸ê¸° #í¸ë¦¬ë¯¸ì—„ #í•„ìˆ˜í…œ #ì‚´ë¦¼í…œ #ìë™ì²­ì†Œ

[Notes]
- ì „ì²´ ê²Œì‹œê¸€ê³¼ ì´ë¯¸ì§€ ìº¡ì…˜ì€ ë³„ê°œë¡œ ì‘ì„±ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
- ì œí’ˆ ì§ì ‘ ì„¤ëª…ì„ í”¼í•˜ê³ , ìì—°ìŠ¤ëŸ¬ìš´ ìŠ¤í† ë¦¬í…”ë§ê³¼ ê³µê°ì„ ìœ ë„í•˜ëŠ” ë‚´ìš©ìœ¼ë¡œ ì‘ì„±í•˜ì„¸ìš”.
- 20~30ëŒ€ ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ìœ í–‰í•˜ëŠ” ì–¸ì–´ì™€ ìŠ¤íƒ€ì¼ì„ ì ê·¹ í™œìš©í•˜ì„¸ìš”."""

    data["image_count"] = len(images)

    prompt = replace_prompt_with_data(prompt, data)

    content = [{"type": "text", "text": prompt}]
    for image in images:
        content.append({"type": "image_url", "image_url": {"url": image}})

    response_schema = {
        "name": "response_schema",
        "schema": {
            "type": "object",
            "properties": {
                "response": {
                    "type": "object",
                    "properties": {
                        "caption": {
                            "type": "array",
                            "description": "caption for making video.",
                            "items": {"type": "string"},
                        },
                        "description": {
                            "type": "string",
                            "description": "The description of the post.",
                        },
                        "hashtag": {
                            "type": "string",
                            "description": "The associated hashtag.",
                        },
                    },
                    "required": ["caption", "description", "hashtag"],
                    "additionalProperties": False,
                }
            },
            "required": ["response"],
            "additionalProperties": False,
        },
        "strict": True,
    }

    return call_chatgpt(content, response_schema, post_id)


def replace_prompt_with_data(prompt, data):
    prompt = prompt.format(**data)
    return prompt


def call_chatgpt(content, response_schema, post_id=0):
    client = OpenAI(api_key=chatgpt_api_key)
    model = "gpt-4o-mini"

    request_log = json.dumps(
        {
            "model": model,
            "messages": [{"role": "user", "content": content}],
            "response_format": {
                "type": "json_schema",
                "json_schema": response_schema,
            },
            "max_tokens": 3000,
            "temperature": 0.9,
        }
    )

    try:
        response = client.chat.completions.create(
            model=model,
            messages=[
                {
                    "role": "user",
                    "content": content,
                }
            ],
            response_format={
                "type": "json_schema",
                "json_schema": response_schema,
            },
            max_tokens=5000,
            temperature=0.9,
        )
        response_log = json.dumps(response.to_dict())

        if response:
            content = response.choices[0].message.content or None
            usage = response.usage
            prompt_tokens = usage.prompt_tokens
            completion_tokens = usage.completion_tokens
            prompt_cache_tokens = usage.prompt_tokens_details.cached_tokens
            prompt_audio_tokens = usage.prompt_tokens_details.audio_tokens
            completion_reasoning_tokens = (
                usage.completion_tokens_details.reasoning_tokens
            )
            completion_audio_tokens = usage.completion_tokens_details.audio_tokens
            completion_accepted_prediction_tokens = (
                usage.completion_tokens_details.accepted_prediction_tokens
            )
            completion_rejected_prediction_tokens = (
                usage.completion_tokens_details.rejected_prediction_tokens
            )
            total_tokens = usage.total_tokens

            status = 1
            if not content:
                status = 0
            RequestLogService.create_request_log(
                post_id=post_id,
                ai_type="chatgpt",
                request=request_log,
                response=response_log,
                prompt_tokens=prompt_tokens,
                prompt_cache_tokens=prompt_cache_tokens,
                prompt_audio_tokens=prompt_audio_tokens,
                completion_tokens=completion_tokens,
                completion_reasoning_tokens=completion_reasoning_tokens,
                completion_audio_tokens=completion_audio_tokens,
                completion_accepted_prediction_tokens=completion_accepted_prediction_tokens,
                completion_rejected_prediction_tokens=completion_rejected_prediction_tokens,
                total_tokens=total_tokens,
                status=status,
            )
            return content
        return None
    except Exception as e:
        response_log = json.dumps({"error": str(e)})
        RequestLogService.create_request_log(
            post_id=post_id,
            ai_type="chatgpt",
            request=request_log,
            response=response_log,
            status=0,
        )
        return None
